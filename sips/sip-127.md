---
sip: <to be assigned>
title: Siloed debt pools
status: WIP
author: Liam Zebedee (@liamzebedee)
discussions-to: <Create a new thread on https://research.synthetix.io and drop the link here> 
created: <date created on, in ISO 8601 (yyyy-mm-dd) format>
requires (*optional): <SIP number(s)>
---

## Simple Summary
<!--"If you can't explain it simply, you don't understand it well enough." Simply describe the outcome the proposed changes intends to achieve. This should be non-technical and accessible to a casual community member.-->
Siloed debt pools will allow more synthetic assets of varying risk profiles to be added to the network. This adds value for traders, and allows stakers to better select to which assets they are exposed.

## Abstract
<!--A short (~200 word) description of the proposed change, the abstract should clearly describe the proposed change. This is what *will* be done if the SIP is implemented, not *why* it should be done or *how* it will be done. If the SIP proposes deploying a new contract, write, "we propose to deploy a new contract that will do x".-->
We propose to introduce a new contract, the `DebtPool`, which encapsulates much of the logic of the existing global debt pool, including the debt cache, fee pool, etc. Each debt pool supports a basket of synthetics, wherein it can issue loans for SNX. The implicit global debt pool is migrated to use the DebtPool contract.

## Motivation
<!--This is the problem statement. This is the *why* of the SIP. It should clearly explain *why* the current state of the protocol is inadequate.  It is critical that you explain *why* the change is needed, if the SIP proposes changing how something is calculated, you must address *why* the current calculation is innaccurate or wrong. This is not the place to describe how the SIP will address the issue!-->

* The Synthetix network currently supports on order of 64+ different assets. 
* Competing protocols are beginning to take the lead on supporting more assets quicker. Mirror.finance already supports XYZ more equity synths.
* The addition of new synths to the Synthetix network is fundamental to providing more value to users as they can enter/exit markets in any asset they like.
* There are two constraints to solving this problem:
* 1) adding new assets increases exposure for the debt pool. With every new asset added, stakers must find a way to hedge their position for/against price movements in that asset.
* 2) the ethereum gas limit for transactions sets an upper bound for the number of assets that can be included in a calculation of total debt. According to some research done by Ale, this limit is 30 assets in the current design.

## Specification
<!--The specification should describe the syntax and semantics of any new feature, there are five sections
1. Overview
2. Rationale
3. Technical Specification
4. Test Cases
5. Configurable Values
-->

### Overview
<!--This is a high level overview of *how* the SIP will solve the problem. The overview should clearly describe how the new feature will be implemented.-->
* Debt pools will be created for different baskets of synthetic assets. Each debt pool is differentiated by the synthetics it supports.
* Each debt pool has its own attached FeePool and DebtCache.
* The debt within each pool is tokenised.


Implications of tokenising debt:
* stakers in debt pools can be incentivised via liquidity mining programs directly.
* debt in more stable debt pools can be used as collateral in more riskier pools, enabling greater capital efficiency. For example, say there is a stablecoins pool and a forex pool. Stakers who provide liquidity to the stablecoin pool can take their trading profits and provide it in the forex pool. 

### Rationale
<!--This is where you explain the reasoning behind how you propose to solve the problem. Why did you propose to implement the change in this way, what were the considerations and trade-offs. The rationale fleshes out what motivated the design and why particular design decisions were made. It should describe alternate designs that were considered and related work. The rationale may also provide evidence of consensus within the community, and should discuss important objections or concerns raised during discussion.-->

### Technical Specification
<!--The technical specification should outline the public API of the changes proposed. That is, changes to any of the interfaces Synthetix currently exposes or the creations of new ones.-->

### Test Cases
<!--Test cases for an implementation are mandatory for SIPs but can be included with the implementation..-->

### Configurable Values (Via SCCP)
<!--Please list all values configurable via SCCP under this implementation.-->

## Copyright
Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).

```
DebtCache
FeePool


Issuer
Exchanger
    `_updateSNXIssuedDebtOnExchange`

CollateralManager
Synth
MultiCollateralSynth
```
